<db_tables_available>
<tables>
    <table>
    <table_name>enterprises</table_name>
    <table_description>B2B customers who purchase wireless services. Each enterprise represents a business customer like Coca-Cola Company with multiple wireless lines and devices.</table_description>
    <table_schema>
    enterprises (
        enterprise_id SERIAL PRIMARY KEY,
        enterprise_name VARCHAR(255) NOT NULL,
        industry VARCHAR(100),
        contact_person VARCHAR(255),
        contact_email VARCHAR(255),
        contact_phone VARCHAR(20),
        billing_address TEXT,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        status VARCHAR(20) DEFAULT 'ACTIVE' CHECK (status IN ('ACTIVE', 'INACTIVE', 'SUSPENDED'))
    )
    </table_schema>
    <data_dictionary>
    enterprise_id: Unique identifier for each enterprise customer
    enterprise_name: Company name (e.g., Coca-Cola Company, Microsoft Corporation)
    industry: Industry sector (e.g., Technology, Healthcare, Manufacturing, Retail)
    contact_person: Primary business contact name
    contact_email: Primary business contact email
    contact_phone: Primary business contact phone number
    billing_address: Complete billing address for the enterprise
    created_at/updated_at: Timestamp tracking
    status: Current account status (ACTIVE, INACTIVE, SUSPENDED)
    </data_dictionary>
    </table>

    <table>
    <table_name>bundles</table_name>
    <table_description>Service plans/packages offered to enterprises. Each bundle defines voice, data, and SMS allowances with pricing per line.</table_description>
    <table_schema>
    bundles (
        bundle_id SERIAL PRIMARY KEY,
        bundle_name VARCHAR(255) NOT NULL,
        bundle_description TEXT,
        voice_minutes INTEGER DEFAULT 0,
        data_gb INTEGER DEFAULT 0,
        sms_count INTEGER DEFAULT 0,
        price_per_line DECIMAL(10,2) NOT NULL,
        overage_voice_rate DECIMAL(6,4) DEFAULT 0.00,
        overage_data_rate DECIMAL(6,4) DEFAULT 0.00,
        overage_sms_rate DECIMAL(6,4) DEFAULT 0.00,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        status VARCHAR(20) DEFAULT 'ACTIVE' CHECK (status IN ('ACTIVE', 'INACTIVE', 'DEPRECATED'))
    )
    </table_schema>
    <data_dictionary>
    bundle_id: Unique identifier for each service bundle
    bundle_name: Marketing name of the bundle (e.g., Enterprise Basic, Enterprise Premium)
    bundle_description: Detailed description of the bundle features
    voice_minutes: Monthly voice allowance in minutes (-1 for unlimited)
    data_gb: Monthly data allowance in gigabytes (-1 for unlimited)
    sms_count: Monthly SMS allowance count (-1 for unlimited)
    price_per_line: Monthly price per line in USD
    overage_voice_rate: Per-minute overage rate for voice
    overage_data_rate: Per-MB overage rate for data
    overage_sms_rate: Per-SMS overage rate
    status: Bundle availability status (ACTIVE, INACTIVE, DEPRECATED)
    </data_dictionary>
    </table>

    <table>
    <table_name>devices</table_name>
    <table_description>Mobile devices assigned to enterprise users including smartphones, tablets, IoT devices, and hotspots.</table_description>
    <table_schema>
    devices (
        device_id SERIAL PRIMARY KEY,
        device_imei VARCHAR(20) UNIQUE NOT NULL,
        device_model VARCHAR(100),
        device_manufacturer VARCHAR(100),
        device_type VARCHAR(50) DEFAULT 'SMARTPHONE' CHECK (device_type IN ('SMARTPHONE', 'TABLET', 'IOT_DEVICE', 'HOTSPOT', 'OTHER')),
        purchase_date DATE,
        warranty_expiry DATE,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        status VARCHAR(20) DEFAULT 'ACTIVE' CHECK (status IN ('ACTIVE', 'INACTIVE', 'DAMAGED', 'LOST', 'RETIRED'))
    )
    </table_schema>
    <data_dictionary>
    device_id: Unique identifier for each device
    device_imei: International Mobile Equipment Identity (unique device identifier)
    device_model: Specific device model (e.g., iPhone 14 Pro, Samsung Galaxy S23)
    device_manufacturer: Device manufacturer (e.g., Apple, Samsung, Google)
    device_type: Type of device (SMARTPHONE, TABLET, IOT_DEVICE, HOTSPOT, OTHER)
    purchase_date: Date when device was purchased
    warranty_expiry: Device warranty expiration date
    status: Device status (ACTIVE, INACTIVE, DAMAGED, LOST, RETIRED)
    </data_dictionary>
    </table>

    <table>
    <table_name>lines</table_name>
    <table_description>Individual wireless service lines. Each line represents a wireless service (voice/data plan) assigned to an enterprise with a specific bundle and potentially a device.</table_description>
    <table_schema>
    lines (
        line_id SERIAL PRIMARY KEY,
        enterprise_id INTEGER NOT NULL REFERENCES enterprises(enterprise_id),
        bundle_id INTEGER NOT NULL REFERENCES bundles(bundle_id),
        device_id INTEGER REFERENCES devices(device_id),
        phone_number VARCHAR(20) UNIQUE NOT NULL,
        sim_card_number VARCHAR(20) UNIQUE,
        employee_name VARCHAR(255),
        employee_email VARCHAR(255),
        department VARCHAR(100),
        activation_date DATE NOT NULL,
        deactivation_date DATE,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        status VARCHAR(20) DEFAULT 'ACTIVE' CHECK (status IN ('ACTIVE', 'SUSPENDED', 'TERMINATED', 'PENDING'))
    )
    </table_schema>
    <data_dictionary>
    line_id: Unique identifier for each line
    enterprise_id: Which enterprise owns this line (direct relationship)
    bundle_id: Service bundle/plan being used
    device_id: Associated device (if any)
    phone_number: Assigned phone number for the line
    sim_card_number: Associated SIM card number
    employee_name: Name of employee assigned to this line
    employee_email: Email of employee assigned to this line
    department: Department within enterprise (e.g., Sales, Marketing, Engineering)
    activation_date: When line was activated
    deactivation_date: When line was deactivated (if applicable)
    status: Line status (ACTIVE, SUSPENDED, TERMINATED, PENDING)
    </data_dictionary>
    </table>

    <table>
    <table_name>daily_usage</table_name>
    <table_description>Daily usage tracking per line for voice, data, and SMS including both domestic and roaming usage with associated charges.</table_description>
    <table_schema>
    daily_usage (
        usage_id SERIAL PRIMARY KEY,
        line_id INTEGER NOT NULL REFERENCES lines(line_id),
        usage_date DATE NOT NULL,
        voice_minutes INTEGER DEFAULT 0,
        voice_minutes_roaming INTEGER DEFAULT 0,
        data_mb INTEGER DEFAULT 0,
        data_mb_roaming INTEGER DEFAULT 0,
        sms_count INTEGER DEFAULT 0,
        sms_count_roaming INTEGER DEFAULT 0,
        voice_charges DECIMAL(8,2) DEFAULT 0.00,
        data_charges DECIMAL(8,2) DEFAULT 0.00,
        sms_charges DECIMAL(8,2) DEFAULT 0.00,
        roaming_charges DECIMAL(8,2) DEFAULT 0.00,
        total_charges DECIMAL(8,2) DEFAULT 0.00,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(line_id, usage_date)
    )
    </table_schema>
    <data_dictionary>
    usage_id: Unique identifier for each daily usage record
    line_id: Which line this usage belongs to
    usage_date: Date of usage
    voice_minutes: Domestic voice usage in minutes for the day
    voice_minutes_roaming: Roaming voice usage in minutes for the day
    data_mb: Domestic data usage in megabytes for the day
    data_mb_roaming: Roaming data usage in megabytes for the day
    sms_count: Domestic SMS count for the day
    sms_count_roaming: Roaming SMS count for the day
    voice_charges: Voice charges for the day
    data_charges: Data charges for the day
    sms_charges: SMS charges for the day
    roaming_charges: Roaming charges for the day
    total_charges: Total charges for the day (sum of all charge types)
    </data_dictionary>
    </table>

    <table>
    <table_name>bills</table_name>
    <table_description>Monthly billing statements for enterprises containing total charges, line counts, and billing details.</table_description>
    <table_schema>
    bills (
        bill_id SERIAL PRIMARY KEY,
        enterprise_id INTEGER NOT NULL REFERENCES enterprises(enterprise_id),
        billing_period_start DATE NOT NULL,
        billing_period_end DATE NOT NULL,
        total_lines INTEGER NOT NULL DEFAULT 0,
        base_charges DECIMAL(12,2) NOT NULL DEFAULT 0.00,
        overage_charges DECIMAL(12,2) NOT NULL DEFAULT 0.00,
        taxes DECIMAL(12,2) NOT NULL DEFAULT 0.00,
        total_amount DECIMAL(12,2) NOT NULL DEFAULT 0.00,
        due_date DATE NOT NULL,
        paid_date DATE,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        status VARCHAR(20) DEFAULT 'PENDING' CHECK (status IN ('PENDING', 'PAID', 'OVERDUE', 'CANCELLED'))
    )
    </table_schema>
    <data_dictionary>
    bill_id: Unique identifier for each bill
    enterprise_id: Which enterprise this bill belongs to (direct relationship)
    billing_period_start/billing_period_end: Billing period dates
    total_lines: Number of active lines during billing period
    base_charges: Base monthly charges for all lines
    overage_charges: Additional charges for usage over plan limits
    taxes: Tax charges applied to the bill
    total_amount: Final amount due (base + overage + taxes)
    due_date: Payment due date
    paid_date: Date payment was received (NULL if unpaid)
    status: Payment status (PENDING, PAID, OVERDUE, CANCELLED)
    </data_dictionary>
    </table>
</tables>

<business_rules>
- **IMPORTANT RELATIONSHIPS**: 
  - enterprises â†’ lines (direct relationship via enterprise_id)
  - enterprises â†’ bills (direct relationship via enterprise_id)
  - lines â†’ bundles (via bundle_id)
  - lines â†’ devices (via device_id, optional)
  - lines â†’ daily_usage (via line_id)
  
- **Key Joins**:
  - enterprises.enterprise_id = lines.enterprise_id
  - enterprises.enterprise_id = bills.enterprise_id
  - lines.bundle_id = bundles.bundle_id
  - lines.device_id = devices.device_id (optional)
  - lines.line_id = daily_usage.line_id

- **Status Values**:
  - lines.status: 'ACTIVE', 'SUSPENDED', 'TERMINATED', 'PENDING'
  - devices.status: 'ACTIVE', 'INACTIVE', 'DAMAGED', 'LOST', 'RETIRED'
  - enterprises.status: 'ACTIVE', 'INACTIVE', 'SUSPENDED'
  - bundles.status: 'ACTIVE', 'INACTIVE', 'DEPRECATED'
  - bills.status: 'PENDING', 'PAID', 'OVERDUE', 'CANCELLED'

- **Data Types and Limits**:
  - Unlimited plans: -1 value in bundles (voice_minutes, data_gb, sms_count)
  - Phone numbers: Format +1-XXXXXXXXXX
  - Usage tracking: Daily granularity per line
  - Billing: Monthly billing cycles per enterprise
  - Charges: Calculated based on bundle overage rates

- **Common Queries**:
  - Voice calls per client: SUM(voice_minutes + voice_minutes_roaming) from daily_usage grouped by enterprise
  - Data usage per enterprise: SUM(data_mb + data_mb_roaming) from daily_usage
  - Revenue per enterprise: SUM(total_amount) from bills
  - Active lines per enterprise: COUNT(*) from lines WHERE status = 'ACTIVE'
</business_rules>
</db_tables_available>
